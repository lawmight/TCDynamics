# Legacy containerized backend template (Express/Postgres/Redis)
# Current production runs on Vercel serverless API + Azure Functions.
# Use this only for local/dev docker setups; do not treat as live prod config.
# Copy to backend/.env.production and override values locally if needed.

# Node.js Configuration
NODE_ENV=production
PORT=8080
LOG_LEVEL=info

# Database Configuration
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=tcdynamics
POSTGRES_USER=tcdynamics
POSTGRES_PASSWORD=CHANGE_THIS_IN_PRODUCTION
POSTGRES_SSL=true

# Redis Configuration
REDIS_HOST=redis
REDIS_PORT=6379
# REDIS_PASSWORD: Required strong password - set via deployment/CI secret manager, never commit actual password
REDIS_PASSWORD=__REQUIRED_REDIS_PASSWORD__

# Azure Services (if used in backend)
AZURE_OPENAI_ENDPOINT=
AZURE_OPENAI_KEY=
AZURE_OPENAI_DEPLOYMENT=
AZURE_OPENAI_API_VERSION=2024-10-21
AZURE_VISION_ENDPOINT=
AZURE_VISION_KEY=

# Stripe Configuration
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=
STRIPE_PUBLISHABLE_KEY=
STRIPE_EVENT_CACHE_MAX=1000
STRIPE_EVENT_CACHE_TTL_MS=900000

# Email Configuration (Zoho)
ZOHO_EMAIL=
ZOHO_PASSWORD=

# Frontend URL
FRONTEND_URL=https://tcdynamics.fr

# Security
SESSION_SECRET=CHANGE_THIS_IN_PRODUCTION_LONG_RANDOM_STRING
CSRF_SECRET=CHANGE_THIS_IN_PRODUCTION_LONG_RANDOM_STRING
ENABLE_CLIENT_IP_LOGGING=false
# Required only if ENABLE_CLIENT_IP_LOGGING=true; use a strong random value
IP_HASH_SALT=

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# CORS
CORS_ORIGIN=https://tcdynamics.fr

# Monitoring
PROMETHEUS_ENABLED=true
GRAFANA_ENABLED=true

# Supabase (Google OAuth + storage for knowledge base)
SUPABASE_URL=
SUPABASE_SERVICE_KEY=
SUPABASE_BUCKET=documents

# Frontend (Vite) public Supabase keys
VITE_SUPABASE_URL=
VITE_SUPABASE_ANON_KEY=

# Vertex AI (Google Cloud)
VERTEX_PROJECT_ID=
VERTEX_LOCATION=us-central1
VERTEX_MODEL=gemini-1.5-flash
VERTEX_EMBED_MODEL=text-embedding-005
# Base64-encoded or raw JSON for service account with Vertex permissions
VERTEX_SERVICE_ACCOUNT_JSON=
