---
description: Custom React hooks patterns
globs: ["apps/frontend/src/hooks/**/*.{ts,tsx}"]
---

# Custom Hooks Patterns

## Hook Structure
Follow this structure for custom hooks:

```typescript
interface UseFormSubmitConfig {
  primaryEndpoint: string
  fallbackEndpoint: string
  enableFallback?: boolean
  errorMessage?: string
}

interface UseFormSubmitReturn<T> {
  submitForm: (data: T) => Promise<ApiResponse>
  isSubmitting: boolean
  response: ApiResponse | null
  clearResponse: () => void
  hasErrors: boolean
  isSuccess: boolean
}

export const useFormSubmit = <T>(
  config: UseFormSubmitConfig
): UseFormSubmitReturn<T> => {
  // implementation
}
```

## Primary/Fallback Pattern
Implement endpoint fallback for resilience:

```typescript
const performRequest = async () => {
  try {
    return await apiRequest(primaryEndpoint, options)
  } catch (primaryError) {
    if (enableFallback && shouldFallback(primaryError)) {
      return await apiRequest(fallbackEndpoint, options)
    }
    throw primaryError
  }
}
```

## State Management
- Return both raw state and derived booleans
- Provide clear reset/clear functions
- Use generics for type-safe data handling

## Analytics Integration
Track form submissions with Vercel Analytics:

```typescript
track('form_submitted', {
  endpoint: primaryEndpoint,
  timestamp: new Date().toISOString(),
})
```
