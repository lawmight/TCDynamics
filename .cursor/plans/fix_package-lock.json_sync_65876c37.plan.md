---
name: Fix package-lock.json sync
overview: Regenerate package-lock.json files to sync with package.json files after the rebase conflict resolution, ensuring CI/CD builds succeed.
todos: []
isProject: false
---

# Fix package-lock.json Sync Issue

## Problem

The `package-lock.json` file is out of sync with `package.json` files after resolving the rebase conflict by accepting the incoming version. The CI/CD workflows fail because `npm ci` requires lock files to match package.json exactly.

## Root Cause

During the rebase, `git checkout --theirs package-lock.json` accepted an older version that doesn't match current dependencies:

- Missing: `@clerk/clerk-react@5.59.3`, `@clerk/types@4.101.10`, `@clerk/shared@3.42.0`, `csstype@3.1.3`
- Version mismatches: `caniuse-lite`, `react-router-dom`, `@remix-run/router`, `react-router`

## Solution

Regenerate all `package-lock.json` files to match their corresponding `package.json` files using npm workspaces.

## Implementation Steps

### 1. Regenerate Root package-lock.json

- Run `npm install` at the root to regenerate [`package-lock.json`](package-lock.json) based on [`package.json`](package.json) and workspace dependencies
- This will update the root lock file and ensure workspace dependencies are properly resolved

### 2. Verify Lock File Sync

- Run `npm ci` at the root to verify the lock file is valid (dry-run check)
- Check that all workspace dependencies are properly resolved

### 3. Commit and Push

- Stage the updated `package-lock.json`
- Commit with message: `fix: regenerate package-lock.json to sync with package.json`
- Push to `origin/main`

### 4. Verify CI/CD

- Monitor the GitHub Actions workflows to ensure they pass
- The `quality-gate.yml` and `deploy-mvp.yml` workflows should now succeed with `npm ci`

## Files to Modify

- [`package-lock.json`](package-lock.json) - Will be regenerated by npm install

## Expected Outcome

- All `package-lock.json` files are in sync with their `package.json` files
- CI/CD workflows pass successfully
- `npm ci` commands work in both local and CI environments
