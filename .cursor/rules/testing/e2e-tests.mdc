---
description: Playwright E2E testing patterns
globs: ["tests/e2e/**/*.spec.ts"]
---

# E2E Testing Patterns

## Test Structure

```typescript
test.describe('Contact Form Flow', () => {
  test.beforeEach(async ({ page }) => {
    await page.goto('/')
  })

  test('should complete contact form successfully', async ({ page }) => {
    await page.click('text=Contact')
    await page.fill('input[name="name"]', 'John Doe')
    await page.fill('input[name="email"]', 'john@example.com')
    await page.click('button:has-text("Envoyer")')

    await expect(page.locator('text=Message envoyÃ©')).toBeVisible()
  })
})
```

## API Mocking
Mock failed requests for error handling tests:

```typescript
test('should handle network errors gracefully', async ({ page }) => {
  await page.route('**/api/contact', route => route.abort())

  // ... fill form and submit

  await expect(page.locator("text=Erreur")).toBeVisible()
})
```

## Mobile Responsiveness

```typescript
test('should be responsive on mobile', async ({ page }) => {
  await page.setViewportSize({ width: 375, height: 667 })

  const mobileMenu = page.locator('button[aria-label*="menu"]')
  await mobileMenu.click()

  await expect(page.locator('text=Accueil')).toBeVisible()
})
```

## Selectors Priority
1. Accessible names: `text=`, `role=`
2. Test IDs: `data-testid`
3. CSS selectors (last resort)
