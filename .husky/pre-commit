#!/usr/bin/env sh
set -e
# Quick pre-commit checks (fast feedback)
echo "ğŸ” Running pre-commit checks..."

# Change to frontend directory (monorepo structure)
REPO_ROOT="$(git rev-parse --show-toplevel 2>/dev/null)"
if [ -z "$REPO_ROOT" ]; then
  echo "âŒ Unable to locate repository root. Make sure git is installed and you're inside the repo."
  exit 1
fi

FRONTEND_DIR="$REPO_ROOT/apps/frontend"
if [ ! -d "$FRONTEND_DIR" ]; then
  echo "âŒ Frontend directory not found at $FRONTEND_DIR"
  exit 1
fi

cd "$FRONTEND_DIR"

# Run lint-staged (ESLint + Prettier)
echo "ğŸ“ Running lint-staged..."
npx lint-staged || exit 1

# Type check TypeScript files
echo "ğŸ”§ Checking TypeScript types..."
npm run type-check || exit 1

echo "âœ… Pre-commit checks passed!"

