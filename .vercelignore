# Note: Root api/ directory is now included for serverless functions

# We remove apps/frontend/api/ before deployment to avoid duplicates

# Vercel will detect and deploy functions from root api/ directory only

# /api/

# Exclude test/config files from being detected as functions

api/**/jest.config.js
api/**/_.test.js
api/\*\*/_.spec.js

# NOTE: Do NOT exclude `api/_lib/**` from uploads.

# Serverless functions import modules from `api/_lib/` at runtime (e.g. `verifyClerkAuth`),

# and excluding it causes production crashes like:

# ERR_MODULE_NOT_FOUND: Cannot find module '/var/task/api/\_lib/auth.js'

#

# If you want to prevent `/api/_lib/*` from being publicly routable, we should move `_lib`

# outside of `api/` (or adjust project structure) in a follow-up.

#

# Exclude templates and scripts from uploads (not needed at runtime for deployed functions)

api/emails/templates/**
api/scripts/**

# Also exclude backend and other non-production directories

apps/backend/
apps/functions-archive/
tests/
tools/
scripts/
docs/
docker/
oh-my-opencode/

# Local/IDE files (OneDrive sync can cause EACCES on deploy)
CLAUDE.md
.codex/
.claude/
